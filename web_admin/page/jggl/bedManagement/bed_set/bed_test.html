<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>床位设置</title>
		<!-- 引入css资源 -->
		<link rel="stylesheet" href="../../../../lib/layui-v2.5.5/css/layui.css" media="all">
	</head>

	<body>
		<!-- 内容 -->
		<div style="padding-left:20px;">		 
			<!-- 楼栋信息 start -->
			<div class="layui-tab layui-tab-card layui-col-md12" lay-filter="demo1">
			  <!-- 楼栋选项卡 start -->
			  <ul class="layui-tab-title">
				<li class="layui-this">网站设置</li>
				<li lay-id="22">用户管理</li>
				<li lay-id="24">权限分配</li>
				<li lay-id="55">商品管理</li>
				<li lay-id="23">订单管理</li>
			  </ul>
			  <!-- 楼栋选项卡 end -->
			  
			  <!-- 楼栋内容 start -->
			  <div class="layui-tab-content" style="height: 100px;">
				<!-- 楼栋内容元素 start -->
				<div class="layui-tab-item layui-show">
					<!-- 层 start -->
					<div class="layui-tab" lay-filter="demo2">
					  <!-- 层-选项卡 start -->
					  <ul class="layui-tab-title">
						<li lay-id="22">用户管理</li>
						<li lay-id="24">权限分配</li>
						<li lay-id="55">商品管理</li>
						<li lay-id="23">订单管理</li>
					  </ul>
					  <!-- 层-选项卡 end -->
					  
					  <!-- 层内容 start -->
					  <div class="layui-tab-content" style="padding-bottom:30px;">
						<!-- 层内容元素 start -->
						<div class="layui-tab-item ">
							<div class="layui-col-sm12">
								<fieldset class="layui-elem-field" style="padding:20px;">
									<legend>1号房间-102号床</legend>
									<!-- 层内容元素块 start -->
									<div class="layui-fluid">
									  <!-- 块 start -->
									  <div class="layui-row layui-col-space10">
										<!-- 块内容 start -->
										<div class="layui-col-sm3">
											<fieldset class="layui-elem-field" style="padding:20px;">
											  <legend>1号房间-102号床</legend>
											    <!-- 块内容客户头像 start -->
												<div class="layui-col-md12 layui-col-space10">
													<!-- <img class="layui-col-md8" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg"> -->
													<!-- <div class="layui-col-md2 layui-col-md-offset2"> -->
														
													<!-- </div> -->
													
													<img class="layui-col-md12" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg">
													<div class="layui-col-md12" style="text-align: center;">
														<div class="layui-inline">
														   <div class="layui-btn" style="margin: 0 auto;">入住</div>
														</div>
													</div>
												</div>
												<!-- 块内容客户头像 end -->
											</fieldset>
										</div>
										<!-- 块内容 end -->
										
										<!-- 块内容 start -->
										<div class="layui-col-sm3">
											<fieldset class="layui-elem-field" style="padding:20px;">
											  <legend>1号房间-102号床</legend>
											  <!-- 块内容客户头像 start -->
												<div class="layui-col-md12 layui-col-space10">
													<img class="layui-col-md8" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg">
													<div class="layui-col-md2 layui-col-md-offset2">
														
													</div>
												</div>
												<!-- 块内容客户头像 end -->
											</fieldset>
										</div>
										<!-- 块内容 end -->
										
										<!-- 块内容 start -->
										<div class="layui-col-sm3">
											<fieldset class="layui-elem-field" style="padding:20px;">
											  <legend>1号房间-102号床</legend>
											  <!-- 块内容客户头像 start -->
												<div class="layui-col-md12 layui-col-space10">
													<!-- <img class="layui-col-md8" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg"> -->
													<!-- <div class="layui-col-md2 layui-col-md-offset2"> -->
														
													<!-- </div> -->
													
													<img class="layui-col-md12" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg">
													<div class="layui-col-md12" style="text-align: center;">
														<div class="layui-inline">
														   <div class="layui-btn" style="margin: 0 auto;">入住</div>
														</div>
													</div>
												</div>
												<!-- 块内容客户头像 end -->
											</fieldset>
										</div>
										<!-- 块内容 end -->
										
										<!-- 块内容 start -->
										<div class="layui-col-sm3">
											<fieldset class="layui-elem-field" style="padding:20px;">
											  <legend>1号房间-102号床</legend>
											  <!-- 块内容客户头像 start -->
												<div class="layui-col-md12 layui-col-space10">
													<!-- <img class="layui-col-md8" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg"> -->
													<!-- <div class="layui-col-md2 layui-col-md-offset2"> -->
														
													<!-- </div> -->
													
													<img class="layui-col-md12" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg">
													<div class="layui-col-md12" style="text-align: center;">
														<div class="layui-inline">
														   <div class="layui-btn" style="margin: 0 auto;">入住</div>
														</div>
													</div>
												</div>
												<!-- 块内容客户头像 end -->
											</fieldset>
										</div>
										<!-- 块内容 end -->
									  </div>
									  <!-- 块 end -->
									</div>
									<!-- 层内容元素块 end -->
								</fieldset>
							</div>
							
							<div class="layui-col-sm12">
								<fieldset class="layui-elem-field" style="padding:20px;">
									<legend>1号房间-102号床</legend>
									<!-- 层内容元素块 start -->
									<div class="layui-fluid">
									  <!-- 块 start -->
									  <div class="layui-row layui-col-space10">
										<!-- 块内容 start -->
										<div class="layui-col-sm3">
											<fieldset class="layui-elem-field" style="padding:20px;">
											  <legend>1号房间-102号床</legend>
											  <!-- 块内容客户头像 start -->
												<div class="layui-col-md12 layui-col-space10">
													<!-- <img class="layui-col-md8" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg"> -->
													<!-- <div class="layui-col-md2 layui-col-md-offset2"> -->
														
													<!-- </div> -->
													
													<img class="layui-col-md12" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg">
													<div class="layui-col-md12" style="text-align: center;">
														<div class="layui-inline">
														   <div class="layui-btn" style="margin: 0 auto;">入住</div>
														</div>
													</div>
												</div>
												<!-- 块内容客户头像 end -->
											</fieldset>
										</div>
										<!-- 块内容 end -->
										
										<!-- 块内容 start -->
										<div class="layui-col-sm3">
											<fieldset class="layui-elem-field" style="padding:20px;">
											  <legend>1号房间-102号床</legend>
											  <!-- 块内容客户头像 start -->
												<div class="layui-col-md12 layui-col-space10">
													<!-- <img class="layui-col-md8" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg"> -->
													<!-- <div class="layui-col-md2 layui-col-md-offset2"> -->
														
													<!-- </div> -->
													
													<img class="layui-col-md12" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg">
													<div class="layui-col-md12" style="text-align: center;">
														<div class="layui-inline">
														   <div class="layui-btn" style="margin: 0 auto;">入住</div>
														</div>
													</div>
												</div>
												<!-- 块内容客户头像 end -->
											</fieldset>
										</div>
										<!-- 块内容 end -->
										<!-- 块内容 start -->
										<div class="layui-col-sm3">
											<fieldset class="layui-elem-field" style="padding:20px;">
											  <legend>1号房间-102号床</legend>
											  <!-- 块内容客户头像 start -->
												<div class="layui-col-md12 layui-col-space10">
													<!-- <img class="layui-col-md8" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg"> -->
													<!-- <div class="layui-col-md2 layui-col-md-offset2"> -->
														
													<!-- </div> -->
													
													<img class="layui-col-md12" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg">
													<div class="layui-col-md12" style="text-align: center;">
														<div class="layui-inline">
														   <div class="layui-btn" style="margin: 0 auto;">入住</div>
														</div>
													</div>
												</div>
												<!-- 块内容客户头像 end -->
											</fieldset>
										</div>
										<!-- 块内容 end -->
										<!-- 块内容 start -->
										<div class="layui-col-sm3">
											<fieldset class="layui-elem-field" style="padding:20px;">
											  <legend>1号房间-102号床</legend>
											  <!-- 块内容客户头像 start -->
												<div class="layui-col-md12 layui-col-space10">
													<!-- <img class="layui-col-md8" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg"> -->
													<!-- <div class="layui-col-md2 layui-col-md-offset2"> -->
														
													<!-- </div> -->
													
													<img class="layui-col-md12" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg">
													<div class="layui-col-md12" style="text-align: center;">
														<div class="layui-inline">
														   <div class="layui-btn" style="margin: 0 auto;">入住</div>
														</div>
													</div>
												</div>
												<!-- 块内容客户头像 end -->
											</fieldset>
										</div>
										<!-- 块内容 end -->
									  </div>
									  <!-- 块 end -->
									</div>
									<!-- 层内容元素块 end -->
								</fieldset>
							</div>
							
							<!-- 层内容元素块 start -->
							<div class="layui-fluid">
							  <!-- 块 start -->
							  <div class="layui-row layui-col-space10">
								<!-- 块内容 start -->
								<div class="layui-col-sm3">
									<fieldset class="layui-elem-field" style="padding:20px;">
									  <legend>1号房间-102号床</legend>
									  <!-- 块内容客户头像 start -->
										<div class="layui-col-md12 layui-col-space10">
											<!-- <img class="layui-col-md8" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg"> -->
											<!-- <div class="layui-col-md2 layui-col-md-offset2"> -->
												
											<!-- </div> -->
											
											<img class="layui-col-md12" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg">
											<div class="layui-col-md12" style="text-align: center;">
												<div class="layui-inline">
												   <div class="layui-btn" style="margin: 0 auto;">入住</div>
												</div>
											</div>
										</div>
										<!-- 块内容客户头像 end -->
									</fieldset>
								</div>
								<!-- 块内容 end -->
								
								<!-- 块内容 start -->
								<div class="layui-col-sm3">
									<fieldset class="layui-elem-field" style="padding:20px;">
									  <legend>1号房间-102号床</legend>
									  <!-- 块内容客户头像 start -->
										<div class="layui-col-md12 layui-col-space10">
											<!-- <img class="layui-col-md8" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg"> -->
											<!-- <div class="layui-col-md2 layui-col-md-offset2"> -->
												
											<!-- </div> -->
											
											<img class="layui-col-md12" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg">
											<div class="layui-col-md12" style="text-align: center;">
												<div class="layui-inline">
												   <div class="layui-btn" style="margin: 0 auto;">入住</div>
												</div>
											</div>
										</div>
										<!-- 块内容客户头像 end -->
									</fieldset>
								</div>
								<!-- 块内容 end -->
								<!-- 块内容 start -->
								<div class="layui-col-sm3">
									<fieldset class="layui-elem-field" style="padding:20px;">
									  <legend>1号房间-102号床</legend>
									  <!-- 块内容客户头像 start -->
										<div class="layui-col-md12 layui-col-space10">
											<!-- <img class="layui-col-md8" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg"> -->
											<!-- <div class="layui-col-md2 layui-col-md-offset2"> -->
												
											<!-- </div> -->
											
											<img class="layui-col-md12" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg">
											<div class="layui-col-md12" style="text-align: center;">
												<div class="layui-inline">
												   <div class="layui-btn" style="margin: 0 auto;">入住</div>
												</div>
											</div>
										</div>
										<!-- 块内容客户头像 end -->
									</fieldset>
								</div>
								<!-- 块内容 end -->
								<!-- 块内容 start -->
								<div class="layui-col-sm3">
									<fieldset class="layui-elem-field" style="padding:20px;">
									  <legend>1号房间-102号床</legend>
									  <!-- 块内容客户头像 start -->
										<div class="layui-col-md12 layui-col-space10">
											<!-- <img class="layui-col-md8" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg"> -->
											<!-- <div class="layui-col-md2 layui-col-md-offset2"> -->
												
											<!-- </div> -->
											
											<img class="layui-col-md12" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg">
											<div class="layui-col-md12" style="text-align: center;">
												<div class="layui-inline">
												   <div class="layui-btn" style="margin: 0 auto;">入住</div>
												</div>
											</div>
										</div>
										<!-- 块内容客户头像 end -->
									</fieldset>
								</div>
								<!-- 块内容 end -->
							  </div>
							  <!-- 块 end -->
							</div>
							<!-- 层内容元素块 end -->
						</div>
						<!-- 层内容元素 end -->
						<div class="layui-tab-item layui-show">
						  1. 高度默认自适应，也可以随意固宽。<br>2. Tab进行了响应式处理，所以无需担心数量多少。
						</div>
						<div class="layui-tab-item">内容3</div>
						<div class="layui-tab-item">内容4</div>
						<div class="layui-tab-item">内容5</div>
					  </div>
					  <!-- 层内容 end -->
					</div>
					<!-- 层 end -->
				</div>
				<!-- 楼栋内容元素 end -->
				<div class="layui-tab-item">2</div>
				<div class="layui-tab-item">3</div>
				<div class="layui-tab-item">4</div>
				<div class="layui-tab-item">5</div>
				<div class="layui-tab-item">6</div>
			  </div>
			  <!-- 楼栋内容 end -->
			</div>
			<!-- 楼栋信息 end -->
		</div>
		
		<!-- 遍历床位 -->
		<script id="bed_data" type="text/html">
			<!-- 楼栋选项卡 end -->
			<ul class="layui-tab-title">
				{{#  layui.each(d.list_bed, function(index, item){ }}
					<li lay-id="{{item.id}}">{{item.name}}</li>
				{{#  }); }}
			</ul>
			<!-- 楼栋选项卡 end -->
				
			<!-- 楼栋内容 start -->
			<div class="layui-tab-content" style="height: 100px;">
				{{#  layui.each(d.list_bed, function(index, item){ }}
					<!-- 楼栋内容元素 start -->
					<div class="layui-tab-item">
						<!-- 层 start -->
						<div class="layui-tab" lay-filter="demo2">
							<!-- 层选项卡 start -->
							<ul class="layui-tab-title">
								{{#  layui.each(item.cheng_list, function(index, item2){ }}
									<li lay-id="{{item2.cheng}}">{{item2.cheng_name}}</li>
								{{#  }); }}
							</ul>
							<!-- 层选项卡 end -->
							
							<!-- 层内容 start -->
							<div class="layui-tab-content" style="padding-bottom:30px;">
								{{#  layui.each(item.cheng_list, function(index, item2){ }}
									<!-- 层内容元素 start -->
									<div class="layui-tab-item">
										{{#  layui.each(item2.jian_list, function(index, item3){ }}
											<!-- 间 start -->
											<div class="layui-col-sm12">
												<!-- 间内容 start -->
												<fieldset class="layui-elem-field" style="padding:20px;">
													<legend>{{item3.jian_name}}号房间</legend>
													<!-- 间内容元素块 start -->
													<div class="layui-fluid">
														<!-- 床位号 start -->
														<div class="layui-row layui-col-space10">
															{{#  layui.each(item3.cwh_list, function(index, item4){ }}
																<!-- 床位号内容 start -->
																<div class="layui-col-sm3">
																	<!-- 床位号内容元素 start -->
																	<fieldset class="layui-elem-field" style="padding:20px;">
																		<legend>{{item.cwh_name}}号床</legend>
																		<!-- 块 start -->
																		<div class="layui-col-md12 layui-col-space10">
																			<!-- 头像 -->
																			<img class="layui-col-md12" height="200px" src="https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4102878314,1970674324&fm=26&gp=0.jpg">
																			<!-- 操作 start -->
																			<div class="layui-col-md12" style="text-align: center;">
																				<div class="layui-inline">
																				   <div class="layui-btn" style="margin: 0 auto;">入住</div>
																				</div>
																			</div>
																			<!-- 操作 end -->
																		</div>
																		<!-- 块 end -->
																	</fieldset>
																	<!-- 床位号内容元素 end -->
																</div>
																<!-- 床位号内容 end -->
															{{#  }); }}
														</div>
														<!-- 床位号 end -->
													</div>
													<!-- 间内容元素块 end -->
												</fieldset>
												<!-- 间内容 end -->
											</div>
											<!-- 间 end -->
										{{#  }); }}
									</div>
									<!-- 层内容元素 end -->
								{{#  }); }}
							</div>
							<!-- 层内容 end -->
						</div>
						<!-- 层 end -->
					</div>
					<!-- 楼栋内容元素 end -->
				{{#  }); }}
			</div>
			<!-- 楼栋内容 end -->
		</script>

		<!-- 引入js资源 -->
		<script src="../../../../lib/layui-v2.5.5/layui.js" charset="utf-8"></script>
		<script src="../../../../js/lay-config.js?v=1.0.4" charset="utf-8"></script>
		<script src="../../../bcxt/login/login.js"></script>
		<script>
			// 加载组件
			layui.use(['table', "tree", 'treetable', 'form','element'], function () {
				var $ = layui.jquery,
						element = layui.element; //Tab的切换功能，切换事件监听等，需要依赖element模块
				var table = layui.table;
				var form = layui.form;
				var tree = layui.tree;
				
				var treetable = layui.treetable;
				var token = Storage.get("token");
				
				//触发事件
				var active = {
					tabChange: function(){
						//切换到指定Tab项
						element.tabChange('demo', '22'); //切换到：用户管理
					}
				}
				
				//element.tabChange('demo1', '55');
				//element.tabChange('demo2', '55');
				$('#demo').on('click', function(){
					var othis = $(this), type = othis.data('type');
					active[type] ? active[type].call(this, othis) : '';
				});

				//获取数据
				getData();
				function getData() {
					// // 渲染表格
					$.ajax({
						url: '/sys_fkcy/bed_info/getAll.action',
						headers: { //通过 request 头传递
							token: token
						},
						type: 'post',
						dataType: 'json',
						success: function (res) {
							if (res.state == 401) {
								window.location.href = '../../bcxt/login/login.html';
							} else {
								renderTable(res.data);
							}

						}
					});

					// 获取树
					var renderTable = function (data) {
						tree.render({
							elem: '#bedAll'
							, text: {
								defaultNodeName: '未命名' //节点默认名称
								, none: '无数据' //数据为空时的提示文本
							}
							, data: data
							, isopen: true   //加载完毕后的展开状态，默认值：true
							, checkChirld: false
							, showLine: true  //是否开启连接线
							, url: '/sys_fkcy/bed_info/getAll.action'
							, showCheckbox: false  //是否显示复选框
							, id: 'demoId1'
							, isJump: false //是否允许点击节点时弹出新窗口跳转
							, click: function (obj) {
								//节点高亮
								var nodes = document.getElementsByClassName("layui-tree-txt");
								for (var i = 0; i < nodes.length; i++) {
									if (nodes[i].innerHTML === obj.data.title)
										nodes[i].style.color = "#1594FF";
									else
										nodes[i].style.color = "#555";
								}
								var dataId = obj.data.id;  //获取当前点击的节点数据
								var dataPid = obj.data.pid;
								$.data = obj.data;
								// 点击节点为号时
								if (obj.data.data_type == '号') {
									//数据列表
									table.render({
										elem: '#currentTableId',
										url: '/sys_fkcy/bed_info/getWherePid.action?pid=' + dataPid, //数据接口
										toolbar: '#toolbarDemo',
										cellMinWidth: 100,
										headers: header,
										defaultToolbar: ['filter', 'exports', 'print', {
											title: '提示',
											layEvent: 'LAYTABLE_TIPS',
											icon: 'layui-icon-tips'
										}],
										cols: [[
											{ type: "checkbox", width: 50 },
											{ field: 'floor_tung_name', title: '楼栋名称', align: "center" },
											{ field: 'floor_layer', title: '楼层名称', align: "center" },
											{ field: 'room_number', title: '房间号', align: "center" },
											{ field: 'bed_number', title: '床位号', align: "center" },
											{ field: 'data_type', title: '数据类型', align: "center" },
											{ field: 'nursing_type', title: '护理类型', align: "center" },
											{ title: '操作', minWidth: 150, toolbar: '#currentTableBar', align: "center", fixed: "right" }

										]],
										initSort: {
											field: 'floor_layer', //排序字段，对应 cols 设定的各字段名
											type: 'asc', //排序方式  asc: 升序、desc: 降序、null: 默认排序
										},
										response: {
											statusName: 'code', //规定返回的状态码字段为code
											statusCode: 200 //规定成功的状态码味200
										},
										parseData: function (result) {
											return {
												"count": result.count + 1,
												"code": result.state, //解析接口状态
												"msg": result.msg, //解析提示文本
												"data": result.data //解析数据列表
											}
										},
										limits: [10, 15, 20, 25, 50, 100],
										limit: 15,
										page: true,
										skin: 'line'
									});

								} else {
									//数据列表
									table.render({
										elem: '#currentTableId',
										url: '/sys_fkcy/bed_info/getWherePid.action?pid=' + dataId, //数据接口
										toolbar: '#toolbarDemo',
										cellMinWidth: 100,
										headers: header,
										defaultToolbar: ['filter', 'exports', 'print', {
											title: '提示',
											layEvent: 'LAYTABLE_TIPS',
											icon: 'layui-icon-tips'
										}],
										cols: [[
											{ type: "checkbox", width: 50 },
											{ field: 'floor_tung_name', title: '楼栋名称', align: "center" },
											{ field: 'floor_layer', title: '楼层名称', toolbar: '#to_ceng', align: "center", },
											{ field: 'room_number', title: '房间号', toolbar: '#jian', align: "center" },
											{ field: 'bed_number', title: '床位号', toolbar: '#hao', align: "center" },
											{ field: 'data_type', title: '数据类型', align: "center" },
											{ field: 'nursing_type', title: '护理类型', align: "center" },
											{ title: '操作', minWidth: 150, toolbar: '#currentTableBar', align: "center", fixed: "right" }

										]],
										// 排序，应用后会导致无数据时没有提示
										// initSort: {
										//     field: 'floor_layer', //排序字段，对应 cols 设定的各字段名
										//     type: 'asc', //排序方式  asc: 升序、desc: 降序、null: 默认排序
										// },
										response: {
											statusName: 'code', //规定返回的状态码字段为code
											statusCode: 200 //规定成功的状态码味200
										},
										parseData: function (result) {
											return {
												"count": result.count + 1,
												"code": result.state, //解析接口状态
												"msg": result.msg, //解析提示文本
												"data": result.data //解析数据列表
											}
										},
										limits: [10, 15, 20, 25, 50, 100],
										limit: 15,
										page: true,
										skin: 'line'
									});
								}
							}
							,
						});
					}
				}
				//数据列表
				table.render({
					elem: '#currentTableId',
					url: '/sys_fkcy/bed_info/getPage.action', //数据接口
					toolbar: '#toolbarDemo',
					cellMinWidth: 100,
					headers: header,
					text: {
						none: '无数据' //数据为空时的提示文本
					},
					defaultToolbar: ['filter', 'exports', 'print', {
						title: '提示',
						layEvent: 'LAYTABLE_TIPS',
						icon: 'layui-icon-tips'
					}],
					cols: [[
						{ type: "checkbox", width: 30 },
						{ field: 'pid', title: '上级ID', align: "center", },
						{ field: 'floor_tung_name', title: '楼栋名称', align: "center" },
						{ field: 'floor_layer', title: '楼层名称', toolbar: '#to_ceng', align: "center" },
						{ field: 'room_number', title: '房间号', toolbar: '#jian', align: "center" },
						{ field: 'bed_number', title: '床位号', toolbar: '#hao', align: "center" },
						{ field: 'data_type', title: '数据类型', align: "center" },
						{ field: 'nursing_type', title: '护理类型', align: "center" },
						{ title: '操作', minWidth: 150, toolbar: '#currentTableBar', align: "center", fixed: "right" }
					]],
					response: {
						statusName: 'code', //规定返回的状态码字段为code
						statusCode: 200 //规定成功的状态码味200
					},
					request: {
						pageName: 'pageIndex',//当前页，默认page，
						limitName: 'pageNum',//页容量，默认limit
					},
					parseData: function (res) {
						return {
							"code": res.state, //解析接口状态
							"msg": res.msg, //解析提示文本
							"count": res.data.numCount,
							"data": res.data.data //解析数据列表
						}
					},
					limits: [10, 15, 20, 25, 50, 100],
					limit: 15,
					page: true,
					skin: 'line'
				});

				//toolbar监听事件
				table.on('toolbar(currentTableFilter)', function (obj) {
					if (obj.event === 'add') {  // 监听添加操作
						var index = layer.open({
							title: '添加信息',
							type: 2,
							shade: 0.2,
							maxmin: true,
							shadeClose: true,
							area: ['500px', '400px'],
							content: './bedInfo_add.html',
							success: function (layero, index) {//弹出层打开后的回调函数
								// layer.full(index);
								var iframe = window['layui-layer-iframe' + index];
								data = $.data;
								// 向子页面的全局函数child传参
								iframe.child(data);
								layer.iframeAuto(index);
								layer.style(index, {
									// 重新居中的样式
									top: (layui.$(window).height() - layui.$(layero).height()) / 2
								})
							}
						});
						$(window).on("resize", function () {
							layer.full(index);
						});
					} else if (obj.event === 'delete') {  // 监听删除操作
						var checkStatus = table.checkStatus('currentTableId')
							, data = checkStatus.data;
						if (data.length > 0) {
							layer.confirm('确认删除所选的全部内容吗？注意:(本操作不可恢复!)', { title: "批量删除提示", icon: 3 }, function (index) {
								for (var i = 0; i < data.length; i++) {
									$.ajax({
										url: '/sys_fkcy/bed_info/deleteWhereId.action?id=' + data[i].id,
										type: 'post',
										headers: header,
										success: function (data) {
											if (data.state != 200) {
												layer.msg(data.msg, { icon: 5 });//失败的表情
												return;
											} else {
												layer.msg(data.msg, {
													icon: 6,//成功的表情
													time: 1000 //1秒关闭（如果不配置，默认是3秒）
												}, function () {
													location.reload();//刷新
												});
											}
										},
										complete: function () {
											layer.close(this.layerIndex);
										},
									});
								}

							});

						} else {
							layer.msg("请先选择您要删除的数据", {
								icon: 5
							});//失败的表情
							return;
						}


					}
				});

				//监听表格复选框选择
				table.on('checkbox(currentTableFilter)', function (obj) {
					console.log(obj)
				});

				//监听操作事件
				table.on('tool(currentTableFilter)', function (obj) {
					var data = obj.data;
					if (obj.event === 'edit') {
						//layer.alert('正在开发中!...');return false;
						var index = layer.open({
							title: '编辑信息',
							type: 2,
							shade: 0.2,
							maxmin: true,
							shadeClose: true,
							area: ['500px', '400px'],
							content: './bedInfo_edit.html',
							success: function (layero, index) {//弹出层打开后的回调函数
								result = JSON.stringify(data);
								result = $.parseJSON(result);
								var iframe = window['layui-layer-iframe' + index];
								// 向子页面的全局函数child传参
								iframe.child(result);
								layer.iframeAuto(index);
								layer.style(index, {
									// 重新居中的样式
									top: (layui.$(window).height() - layui.$(layero).height()) / 2
								})
							}
						});
						$(window).on("resize", function () {
							layer.full(index);
						});
						return false;
					} else if (obj.event === 'delete') {
						layer.confirm('确认删除吗？', { title: "提示", icon: 3 }, function (index) {
							obj.del();
							$.ajax({
								url: '/sys_fkcy/bed_info/deleteWhereId.action?id=' + data.id,
								type: 'post',
								headers: header,
								success: function (data) {
									if (data.state == 401) {
										window.location.href = "../login/login.html";
									} else if (data.state == 200) {
										layer.msg(data.msg, {
											icon: 6,//成功的表情
											time: 1000 //1秒关闭（如果不配置，默认是3秒）
										}, function () {
											obj.del();
											location.reload();
										});
									} else {
										layer.msg(data.msg, { icon: 5 });//失败的表情
										return;
									}
								},
								complete: function () {
									layer.close(this.layerIndex);
								},
							});
							layer.close(index);
						});
					}
				});
			});
		</script>
	</body>
</html>